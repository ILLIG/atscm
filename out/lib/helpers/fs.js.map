{"version":3,"file":"fs.js","names":["_fsExtra","require","_detectIndent","_interopRequireDefault","e","__esModule","default","updateFile","path","update","encoding","contents","readFile","updated","writeFile","updateJson","indent","detectIndent","current","JSON","parse","stringify"],"sources":["../../../src/lib/helpers/fs.ts"],"sourcesContent":["import { readFile, writeFile } from 'fs-extra';\r\nimport detectIndent from 'detect-indent';\r\n\r\ntype UpdateFn<T = string> = (current: T) => T | Promise<T>;\r\n\r\nexport async function updateFile(path: string, update: UpdateFn, encoding: BufferEncoding = 'utf8'): Promise<void> {\r\n  const contents = await readFile(path, encoding);\r\n  const updated = await update(contents);\r\n\r\n  return writeFile(path, updated);\r\n}\r\n\r\nexport async function updateJson<T = {}>(path: string, update: UpdateFn<T>): Promise<void> {\r\n  return updateFile(path, async (contents) => {\r\n    const indent = detectIndent(contents).indent || '  ';\r\n    const current = JSON.parse(contents) as T;\r\n\r\n    const updated = await update(current);\r\n\r\n    return JSON.stringify(updated, null, indent);\r\n  });\r\n}\r\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,aAAA,GAAAC,sBAAA,CAAAF,OAAA;AAAyC,SAAAE,uBAAAC,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAIlC,eAAeG,UAAUA,CAACC,IAAY,EAAEC,MAAgB,EAAEC,QAAwB,GAAG,MAAM,EAAiB;EACjH,MAAMC,QAAQ,GAAG,MAAM,IAAAC,iBAAQ,EAACJ,IAAI,EAAEE,QAAQ,CAAC;EAC/C,MAAMG,OAAO,GAAG,MAAMJ,MAAM,CAACE,QAAQ,CAAC;EAEtC,OAAO,IAAAG,kBAAS,EAACN,IAAI,EAAEK,OAAO,CAAC;AACjC;AAEO,eAAeE,UAAUA,CAASP,IAAY,EAAEC,MAAmB,EAAiB;EACzF,OAAOF,UAAU,CAACC,IAAI,EAAE,MAAOG,QAAQ,IAAK;IAC1C,MAAMK,MAAM,GAAG,IAAAC,qBAAY,EAACN,QAAQ,CAAC,CAACK,MAAM,IAAI,IAAI;IACpD,MAAME,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACT,QAAQ,CAAM;IAEzC,MAAME,OAAO,GAAG,MAAMJ,MAAM,CAACS,OAAO,CAAC;IAErC,OAAOC,IAAI,CAACE,SAAS,CAACR,OAAO,EAAE,IAAI,EAAEG,MAAM,CAAC;EAC9C,CAAC,CAAC;AACJ","ignoreList":[]}